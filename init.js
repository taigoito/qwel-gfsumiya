(()=>{"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}new(function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._elem=t||document.querySelector(".slider"),this._elem&&(this._inner=this._elem.querySelector(".is-style-slider-items"),this._inner&&(this._items=this._inner.children,this._items.length&&(this._isHeader=this._elem.dataset.isHeader||!1,this._aspectRatio=this._elem.dataset.aspectRatio||5/8,this._gap=this._elem.dataset.gap-0||0,this._interval=this._elem.dataset.interval||3e3,this._duration=this._elem.dataset.duration||500,this._inner.style.flexWrap="nowrap",this._inner.style.gap="".concat(this._gap,"px"),this._currentIndex=0,this._itemsCount=this._items.length,this._distance=0,this._dragDistance=[],this.isAnimated=!1,this._setupNavs(),this._setupItems(),this._readyMove(-3,!0),this._setActiveTarget(),this._handleEvents(),this._windowResizeHandler(),this._interval>=1e3&&this.startInterval())))}var i,n;return i=e,n=[{key:"startInterval",value:function(){this._isPlay=!0,this._timeStart=null,this._loop(performance.now())}},{key:"stopInterval",value:function(){this._isPlay=!1}},{key:"_loop",value:function(t){this._timeStart||(this._timeStart=t),t-this._timeStart<this._interval?window.requestAnimationFrame(this._loop.bind(this)):this._done()}},{key:"_done",value:function(){this._isPlay&&(this.startInterval(),this.move(1))}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._duration;this._readyMove(t);var i=this._items.length;if(this._currentIndex+=t,this._currentIndex<0&&(this._currentIndex+=i),this._currentIndex>=i&&(this._currentIndex-=i),this.isAnimated=!0,this._start=this._distance,t<0)for(var n=0;n>t;n--)this._start-=this._items[(this._currentIndex-n-3+i)%i].clientWidth,this._start-=this._gap;else for(var s=0;s<t;s++)this._start+=this._items[(this._currentIndex-s-4+i)%i].clientWidth,this._start+=this._gap;this._stop=this._getAdjustedDistance(this._currentIndex),this._flickDistance=this._stop-this._start,this._currentDuration=e,this._timeStart=!1,this._moving(performance.now())}},{key:"_readyMove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._items.length;if(t<0)for(var n=0;n>t;n--){var s=(this._currentIndex+n-4+i)%i;e&&(s+=3);var a=window.getComputedStyle(this._items[s]).order;this._items[s].style.order=parseInt(a)-1}else for(var r=0;r<t;r++){var h=(this._currentIndex+r-3+i)%i;e&&(h+=3);var _=window.getComputedStyle(this._items[h]).order;this._items[h].style.order=parseInt(_)+1}}},{key:"_setupNavs",value:function(){this._prev=document.createElement("a"),this._prev.classList.add("slider__prev"),this._prev.setAttribute("href","#");var t=document.createElement("span");t.dataset.icon="ei-chevron-left",t.dataset.size="l",this._prev.appendChild(t),this._next=document.createElement("a"),this._next.classList.add("slider__next"),this._next.setAttribute("href","#");var e=document.createElement("span");e.dataset.icon="ei-chevron-right",e.dataset.size="l",this._next.appendChild(e),this._nav=document.createElement("ul"),this._nav.classList.add("slider__nav");for(var i=0;i<this._itemsCount;i++){var n=document.createElement("li");n.classList.add("slider__navItem"),n.dataset.targetIndex=i,this._nav.appendChild(n)}this._elem.appendChild(this._prev),this._elem.appendChild(this._next),this._elem.after(this._nav)}},{key:"_setupItems",value:function(){for(;this._items.length<7;)for(var t=0;t<this._itemsCount;t++){var e=this._items[t].cloneNode(!0);this._inner.appendChild(e)}}},{key:"_setActiveTarget",value:function(){this._inner.querySelector(".--current")&&this._inner.querySelector(".--current").classList.remove("--current"),this._items[this._currentIndex].classList.add("--current"),this._nav.querySelector(".--current")&&this._nav.querySelector(".--current").classList.remove("--current"),this._navItems=this._nav.children,this._navItems[this._currentIndex%this._itemsCount].classList.add("--current")}},{key:"_handleEvents",value:function(){var t=this,e="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0;this._x=0,this._y=0,this._isDragging=!1,this._delta=0,e&&(this._inner.addEventListener("touchstart",(function(e){t._x=e.touches[0].clientX,t._y=e.touches[0].clientY,t._isDragging=!0,t._myStartHandler()})),this._inner.addEventListener("touchmove",(function(e){t._x=e.touches[0].clientX,t._y=e.touches[0].clientY,t._myMoveHandler()})),this._inner.addEventListener("touchend",(function(){t._myEndHandler(),t._isDragging=!1})),this._inner.addEventListener("touchcancel",(function(){t._myEndHandler(),t._isDragging=!1}))),this._inner.addEventListener("mousedown",(function(e){t._x=e.clientX,t._y=e.clientY,t._isDragging=!0,t._myStartHandler(),e.preventDefault()})),this._inner.addEventListener("mousemove",(function(e){t._x=e.clientX,t._y=e.clientY,t._myMoveHandler(),e.preventDefault()})),this._inner.addEventListener("mouseup",(function(){t._myEndHandler(),t._isDragging=!1})),this._inner.addEventListener("mouseleave",(function(){t._myEndHandler(),t._isDragging=!1})),this._isHeader||this._inner.addEventListener("wheel",(function(e){t._delta=e.deltaY,t._myWheelHandler(),e.preventDefault()})),this._inner.querySelectorAll(".post__image > a").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault()}))})),this._nav.addEventListener("click",(function(e){var i=e.target;i.dataset.targetIndex&&(t.move(i.dataset.targetIndex-t._currentIndex%t._itemsCount),t.stopInterval())})),this._prev.addEventListener("click",(function(e){t.isAnimated||t.move(-1),t.stopInterval(),e.preventDefault()})),this._next.addEventListener("click",(function(e){t.isAnimated||t.move(1),t.stopInterval(),e.preventDefault()})),window.addEventListener("resize",(function(){t._windowResizeHandler()}))}},{key:"_myStartHandler",value:function(){this._dragDistance=[this._x],this.stopInterval()}},{key:"_myMoveHandler",value:function(){if(this._isDragging&&!this.isAnimated){this._dragDistance.push(this._x);for(var t=this._dragDistance.length,e=0,i=0;i<t;i++)i>0&&(e=this._dragDistance[i]-this._dragDistance[i-1],this._inner.style.transform="translateX(".concat(this._distance+e,"px)"));this._distance+=e}}},{key:"_myEndHandler",value:function(){if(this._isDragging){var t=this._dragDistance[0]-this._dragDistance[this._dragDistance.length-1];if(Math.abs(t)>10){var e=this._items.length,i=0;if(t<0){var n=this._items[(this._currentIndex-3+e)%e].clientWidth,s=this._items[(this._currentIndex-2+e)%e].clientWidth;n/3<Math.abs(t)&&i--,(2*n+s)/3<Math.abs(t)&&i--}else{var a=this._items[(this._currentIndex-4+e)%e].clientWidth,r=this._items[(this._currentIndex-5+e)%e].clientWidth;a/3<Math.abs(t)&&i++,(2*a+r)/3<Math.abs(t)&&i++}this.move(i,this._duration/2)}}}},{key:"_myWheelHandler",value:function(){var t=this._delta;t<0&&!this.isAnimated&&this.move(-1),t>0&&!this.isAnimated&&this.move(1),this.stopInterval()}},{key:"_windowResizeHandler",value:function(){this._inner.style.width="".concat(this._getInnerWidth(),"px"),this._distance=this._getAdjustedDistance(this._currentIndex),this._inner.style.transform="translateX(".concat(this._distance,"px)")}},{key:"_getInnerWidth",value:function(){var t=this._items.length;return this._elem.clientHeight/this._aspectRatio*t+this._gap*(t-1)}},{key:"_getAdjustedDistance",value:function(t){var e=this._items.length,i=window.innerWidth/2;i-=this._items[t%e].clientWidth/2;for(var n=0;n>-3;n--){var s=(t+n-1+e)%e;i-=this._items[s].clientWidth,i-=this._gap}return i}},{key:"_moving",value:function(t){this._timeStart||(this._timeStart=t);var e=t-this._timeStart,i=this._easing(e,this._start,this._flickDistance,this._currentDuration);this._inner.style.transform="translateX(".concat(i,"px)"),e<this._currentDuration?window.requestAnimationFrame(this._moving.bind(this)):this._moved()}},{key:"_moved",value:function(){this._inner.style.transform="translateX(".concat(this._start+this._flickDistance,"px)"),this.timeStart=!1,this.isAnimated=!1,this._setActiveTarget(),this._windowResizeHandler()}},{key:"_easing",value:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}}],n&&t(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),e}())})();